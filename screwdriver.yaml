jobs:
  master-commit:
    image: maven:3.6.3-jdk-8
    requires: [~pr, ~commit]
    steps:
      - build: mvn -B clean verify coveralls:report

  elide-5-build:
    image: maven:3.6.3-jdk-8
    requires: [~pr:elide-5.x, ~commit:elide-5.x]
    steps:
      - build: mvn -B clean verify coveralls:report

  release:
    secrets:
        - BINTRAY_USER
        - BINTRAY_API_KEY
    image: maven:3.6.3-jdk-8
    requires: [~tag, ~release]
    steps:
      - release: mvn -B -DskipTests deploy --settings ./settings.xml
